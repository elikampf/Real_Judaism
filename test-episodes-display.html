<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Episodes Display</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        .test-result { padding: 1rem; margin: 1rem 0; border-radius: 6px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        pre { background: #f8f9fa; padding: 1rem; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üéß Episodes Display Test</h1>
    <p>This page tests if your episode system is working correctly.</p>

    <div id="test-results"></div>

    <script>
        const results = document.getElementById('test-results');

        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }

        async function testEpisodesSystem() {
            addResult('üîç Starting episode system test...', 'info');

            try {
                // Test 1: Load JSON data
                addResult('üì° Testing JSON data loading...', 'info');

                const response = await fetch('data/episodes.json');
                if (!response.ok) {
                    throw new Error(`Failed to load JSON: ${response.status}`);
                }

                const data = await response.json();
                const episodeCount = data.episodes ? data.episodes.length : 0;
                const seriesCount = data.series ? Object.keys(data.series).length : 0;

                addResult(`‚úÖ JSON loaded successfully!<br>‚Ä¢ Episodes: ${episodeCount}<br>‚Ä¢ Series: ${seriesCount}`, 'success');

                // Test 2: Check data structure
                if (data.episodes && Array.isArray(data.episodes)) {
                    addResult('‚úÖ Episodes array structure is correct', 'success');
                } else {
                    addResult('‚ùå Episodes array structure is incorrect', 'error');
                }

                if (data.series && typeof data.series === 'object') {
                    addResult('‚úÖ Series object structure is correct', 'success');

                    // Show series breakdown
                    let seriesBreakdown = '<strong>Series Breakdown:</strong><br>';
                    Object.keys(data.series).forEach(seriesName => {
                        const series = data.series[seriesName];
                        const count = series.episodes ? series.episodes.length : (series.episode_count || 0);
                        seriesBreakdown += `‚Ä¢ ${seriesName}: ${count} episodes<br>`;
                    });
                    addResult(seriesBreakdown, 'info');
                } else {
                    addResult('‚ùå Series object structure is incorrect', 'error');
                }

                // Test 3: Check sample episode
                if (data.episodes && data.episodes.length > 0) {
                    const sampleEpisode = data.episodes[0];
                    addResult(`‚úÖ Sample episode loaded:<br>‚Ä¢ Title: ${sampleEpisode.title || 'N/A'}<br>‚Ä¢ Series: ${sampleEpisode.series || 'N/A'}<br>‚Ä¢ Date: ${sampleEpisode.date || 'N/A'}`, 'success');
                }

                addResult('üéâ Episode system test completed successfully!', 'success');

            } catch (error) {
                addResult(`‚ùå Test failed: ${error.message}`, 'error');
                console.error('Test error:', error);
            }
        }

        // Run test when page loads
        document.addEventListener('DOMContentLoaded', function() {
            testEpisodesSystem();
        });
    </script>
</body>
</html>
